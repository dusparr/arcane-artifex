<form autocomplete="on">
  <div class="sheet-body flexrow">
    <section>
      <div class="url-group">
        <h2>AI HORDE URL</h2>
        <div class="form-group">
          <label>AI Horde URL</label>
          <div class="form-fields">
            <input type="text" name="horde_url" value="{{horde_url}}">
          </div>
        </div>
      </div>

      <div class="api">
        <h2>AI HORDE API KEY</h2>
        <div class="form-group">
          <label>API Key</label>
          <div class="form-fields">
            <input type="password" name="horde_api_key" value="{{horde_api_key}}">
          </div>
        </div>
      </div>

    <div class="toggles">
        <h2>AI HORDE TOGGLES</h2>
        <div class="form-group" style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <label>Allow NSFW?</label>
            <input type="checkbox" name="horde_nsfw" data-dtype="Boolean" {{#if horde_nsfw}}checked{{/if}}> 
            <p class="notes">Allow NSFW images from Horde</p>
          </div>
          <div>
            <label>Allow Karas?</label>
            <input type="checkbox" name="horde_karras" data-dtype="Boolean" {{#if horde_karras}}checked{{/if}}> 
            <p class="notes">Karras (not all samplers supported)</p>
          </div>
        </div>
      </div>
      
<div class="horde-settings">
  <h2>Configuration</h2>
  <div class="form-group">
    <div class="slider-container">
      <div class="slider-item">
        <label for="horde-cfg-scale-slider">Horde CFG Scale:</label>
        <input type="range" id="horde-cfg-scale-slider" name="horde_cfg_scale" min="1" max="30" step="0.5" value="{{horde_cfg_scale}}" oninput="updateCfgScaleValue(this.value)">
        <input type="number" id="horde-cfg-scale-input" name="horde_cfg_scale" min="1" max="30" step="0.5" value="{{horde_cfg_scale}}" onchange="updateCfgScaleSlider(this.value)">
      </div>
      <div class="slider-item">
        <label for="horde-sampler-steps-slider">Sampler Steps:</label>
        <input type="range" id="horde-sampler-steps-slider" name="horde_sampler_steps" min="1" max="150" step="1" value="{{horde_sampler_steps}}" oninput="updateSamplerStepsValue(this.value)">
        <input type="number" id="horde-sampler-steps-input" name="horde_sampler_steps" min="1" max="150" step="1" value="{{horde_sampler_steps}}" onchange="updateSamplerStepsSlider(this.value)">
      </div>
    </div>
  </div>
        <div class="resolution">
        <h2>RESOLUTION</h2> 
        <h4>active resolution: {{horde_resolution}}</h4> 
        <select id="resolution-select" name="horde_resolution">
          <option>change resolution here</option>
          {{#each horde_resolutions}}
            <option value="{{this.value}}" {{#if (eq this.value ../horde_resolution)}}selected{{/if}}>{{this.text}}</option>
          {{/each}}
        </select>
      </div>
</div>

<script>
  function updateCfgScaleValue(value) {
    document.getElementById('horde-cfg-scale-input').value = value;
  }

  function updateCfgScaleSlider(value) {
    document.getElementById('horde-cfg-scale-slider').value = value;
  }

  function updateSamplerStepsValue(value) {
    document.getElementById('horde-sampler-steps-input').value = value;
  }

  function updateSamplerStepsSlider(value) {
    document.getElementById('horde-sampler-steps-slider').value = value;
  }
</script>

<style>
  .slider-container {
    display: flex;
    justify-content: space-between;
  }

  .slider-item {
    flex: 1;
    margin-right: 20px;
  }

  .slider-item:last-child {
    margin-right: 0;
  }

  .slider-item input[type="range"] {
    width: 100%;
    margin-bottom: 5px;
  }

  .slider-item input[type="number"] {
    width: 60px;
  }
</style>
      
      <div class="models">
        <h2>MODELS</h2> 
        <h4>active model: {{horde_model}}</h4> 
        <select id="model-select" name="horde_model">
          <option>change model here</option>
          {{#each horde_models}}
            <option value="{{this.value}}" {{#if (eq this.value ../horde_model)}}selected{{/if}}>{{this.text}}</option>
          {{/each}}
        </select>
      </div>
    </section>
  </div>

<div class="samplers">
    <h2>SAMPLERS</h2> 
    <h4>active sampler: {{horde_sampler}}</h4> 
    <select id="sampler-select" name="horde_sampler">
      <option>change sampler here</option>
      {{#each horde_samplers}}
        <option value="{{this}}" {{#if (eq this ../horde_sampler)}}selected{{/if}}>{{this}}</option>
      {{/each}}
    </select>
  </div>
  

  <div class="sheet-footer">
    <button type="submit"> 
      <i class="far fa-save"></i> {{ localize "Submit"}} 
    </button>
  </div>
</form>
